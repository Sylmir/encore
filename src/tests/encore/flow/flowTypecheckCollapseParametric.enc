-- Ensure that Flow[Flow[T]] properly collapses when we are dealing with
-- parametric types.

fun ensureCollapse(f : Flow[int]) : unit
    println("...")
end

active class Foo[t]
    var m_content : t

    def setContent(content : t) : unit
        this.m_content = content
    end

    def getContent() : t
        return this.m_content
    end
end

active class Main
    def main() : unit
        var f = new Foo[Flow[int]]
        f!setContent(2)
        var r = get(f!getContent()) -- r must have type Flow[int]
        ensureCollapse(r)
    end
end

